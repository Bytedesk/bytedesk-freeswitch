<configuration name="odbc_cdr.conf" description="ODBC CDR Configuration">
  <settings>
    <!-- 数据库 DSN 名称 -->
    <!-- 连接信息在 vars.xml 中统一配置，通过 $${legacy_odbc_dsn} 变量引用 -->
    <!-- 格式: dsn:username:password -->
    <!-- <param name="odbc-dsn" value="$${legacy_odbc_dsn}"/> -->
    
    <!-- CDR 日志 - 记录到 FreeSWITCH 日志文件 -->
    <param name="log-b-leg" value="true"/>
    
    <!-- 数据库表名 -->
    <param name="table" value="cdr"/>
    
    <!-- CDR 字段映射 - 将 FreeSWITCH 通道变量映射到数据库字段 -->
    <schema>
      <!-- 基本通话信息 -->
      <field var="uuid" column="uuid"/>
      <field var="caller_id_name" column="caller_id_name"/>
      <field var="caller_id_number" column="caller_id_number"/>
      <field var="destination_number" column="destination_number"/>
      <field var="context" column="context"/>
      <field var="start_stamp" column="start_stamp"/>
      <field var="answer_stamp" column="answer_stamp"/>
      <field var="end_stamp" column="end_stamp"/>
      <field var="duration" column="duration"/>
      <field var="billsec" column="billsec"/>
      <field var="hangup_cause" column="hangup_cause"/>
      
      <!-- 账户信息 -->
      <field var="accountcode" column="accountcode"/>
      
      <!-- SIP 信息 -->
      <field var="sip_hangup_disposition" column="sip_hangup_disposition"/>
      
      <!-- 自定义字段示例 -->
      <!-- <field var="custom_field" column="custom_field"/> -->
    </schema>
  </settings>
</configuration>
